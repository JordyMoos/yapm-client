<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>

    <script src="md5.js"></script>

    <script>
        function a2s(buffer) {
            var str = '';

            for (var iii = 0; iii < buffer.byteLength; iii++) {
                str += String.fromCharCode(buffer[iii]);
            }

            return str;
        }

        function s2a(string) {
            var array = [], i;

            for (i = 0; i < string.length; i++) {
                array[i] = string.charCodeAt(i);
            }

            return array;
        }

        function openSSLKey(passwordArr, saltArr) {
            var data00 = passwordArr.concat(saltArr),
                md5_hash = [md5(data00)],
                result = md5_hash[0];

            for (var i = 1; i < 3; i++) {
                md5_hash[i] = md5(md5_hash[i - 1].concat(data00));
                result = result.concat(md5_hash[i]);
            }

            return {
                key: result.slice(0, 32),
                iv: result.slice(32, 48)
            };
        }

        var cipherText =
                'U2FsdGVkX1+bJC+EBMO30TymtV96x4p7M9h00AoVUfMjRxxooGLjZFvHI1AjnMWI' +
                'rfId/x/UG4k1uBTbhq9CJ73lGoE8JrGN4T2tgAxqFpAm8CVcIM7YAJel/fUg4U/t' +
                'lrVaSjKq3Wh43FoVJxiEHLhTRYRpVfFE16nTXIIZyw8Pj1mbCIFo0vV32Lv3T9lG' +
                'ClZt2BtZueSxQoMJYuf+wkqE77DxQPY5R1pNCeLxQ2Olm5p0NGElBxxwEOSw41Ez' +
                'Io62lUdgCg1ZyDGiQHMXfw==';
        var password = "changeme";

        var crypto = window.crypto || window.msCrypto;
        var plainText = s2a(atob(cipherText));
        var keyIvPair = openSSLKey(s2a(password), plainText.slice(8, 16));
        var key = new Uint8Array(keyIvPair.key);
        var iv = new Uint8Array(keyIvPair.iv);
        var cryptoText = new Uint8Array(plainText.slice(16));

        window.crypto.subtle.importKey("raw", key, {name: "AES-CBC"}, false, ["encrypt", "decrypt"])
            .then(function (key) {
                return crypto.subtle.decrypt({name: "AES-CBC", iv: iv}, key, cryptoText)
            })
            .then(function(result) {
                var decrypted_data = new Uint8Array(result);

                return Promise.resolve(a2s(decrypted_data));
            });
    </script>
</body>
</html>